<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENERGY CORE</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4LBK5FH581"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-4LBK5FH581');
    </script>
</head>

<body>
    <div id="game-container">
        <!-- Canvas Layer -->
        <canvas id="game-canvas"></canvas>

        <!-- UI Layout Area -->
        <div id="ui-layer">
            <div id="fever-overlay"></div>
            <div id="fever-alert" class="hidden">FEVER!</div>
            <!-- HUD -->
            <div id="hud" class="hidden">
                <div id="score-container" class="hud-column">
                    <div class="hud-item" id="score-display">SCORE: 000000</div>
                    <!-- ガード表示 -->
                    <div id="guard-container">
                        <div class="hud-icon-wrapper">
                            <img id="guard-icon" src="assets/ui/icons/icon_item_guard_hex.webp" alt="GUARD">
                            <span class="hud-icon-label">GUARD</span>
                        </div>
                        <div id="guard-count">×0</div>
                    </div>
                    <!-- ボム表示 -->
                    <div id="bomb-container">
                        <div class="hud-icon-wrapper">
                            <img id="bomb-icon" src="assets/ui/icons/icon_item_bomb_hex.webp" alt="BOMB">
                            <span class="hud-icon-label">BOM</span>
                        </div>
                        <div id="bomb-count">×0</div>
                    </div>
                </div>

                <div id="combo-container" class="hud-column">
                    <div id="combo-info">
                        <span id="multiplier-display">x1.0</span>
                        <span id="combo-display">
                            <span id="combo-num">0</span>
                            <span id="combo-label">COMBO</span>
                        </span>
                    </div>
                </div>

                <div id="right-hud" class="hud-column">
                    <div class="hud-item" id="hp-display">HP: ★★★</div>
                    <div class="hud-item" id="stage-display">
                        <div id="stage-label">STAGE</div>
                        <div id="stage-number">1</div>
                    </div>
                </div>
            </div>

            <!-- Title Screen -->
            <div id="scene-title" class="scene active">
                <h1 id="title-logo">ENERGY CORE</h1>
                <div id="high-score">HIGH SCORE: 0</div>
                <button id="btn-start" class="btn-primary">START GAME</button>
                <div class="credit-text">© 2026 t.o.b</div>
            </div>

            <!-- Game Over Screen -->
            <div id="scene-gameover" class="scene hidden">
                <h2>GAME OVER</h2>
                <div id="final-score">SCORE: 0</div>
                <div id="player-title">称号: 観測中...</div>
                <div id="new-record" class="hidden">NEW RECORD!</div>

                <!-- プレイ統計表示 -->
                <div id="statistics-container">
                    <div class="stat-row">総タップ数: <span id="stat-total-taps">0</span></div>
                    <div class="stat-row">最大コンボ: <span id="stat-max-combo">0</span></div>
                    <div class="stat-row">フィーバー回数: <span id="stat-fever-count">0</span></div>
                    <div class="stat-row">ミス率: <span id="stat-miss-rate">0.0</span>%</div>
                    <div class="stat-detail">HIT: <span id="stat-hit-taps">0</span> / MISS: <span
                            id="stat-miss-taps">0</span></div>
                </div>

                <div class="thanks-text">Thanks for playing</div>

                <div class="btn-group">
                    <button id="btn-retry" class="btn-primary">RETRY</button>
                    <button id="btn-to-title" class="btn-secondary">TITLE</button>
                    <a id="btn-youtube" class="btn-secondary youtube-btn hidden"
                        href="https://www.youtube.com/@toxicoutbrain" target="_blank"
                        rel="noopener noreferrer">YOUTUBE</a>
                </div>
            </div>
        </div>


        <!-- Debug HUD -->
        <div id="debug-hud" class="hidden">
            FPS: <span id="debug-fps">0</span><br>
            ALIVE: <span id="debug-alive">0</span><br>
            LAST EVENT: <span id="debug-event">NONE</span><br>
            SCENE: <span id="debug-scene">NONE</span><br>
            <button id="debug-fever-btn"
                style="pointer-events: auto; cursor: pointer; margin-top: 5px; padding: 2px 5px; font-size: 10px; background: #ff2a6d; color: white; border: none; border-radius: 3px;">FEVER-1</button>
            <button id="debug-guard-btn"
                style="pointer-events: auto; cursor: pointer; margin-top: 5px; padding: 2px 5px; font-size: 10px; background: #05d9e8; color: black; border: none; border-radius: 3px;">GUARD+1</button>
            <button id="debug-bomb-btn"
                style="pointer-events: auto; cursor: pointer; margin-top: 5px; padding: 2px 5px; font-size: 10px; background: #ff4444; color: white; border: none; border-radius: 3px;">BOMB+1</button>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/engine.js"></script>
</body>

</html>